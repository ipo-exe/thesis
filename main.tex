\documentclass[11pt, a4paper]{report}

% ------------ PACKAGES ------------  
\usepackage[utf8]{inputenc}
% language set up
\usepackage[english, main=portuguese]{babel}
\usepackage{CJKutf8}
% ------------ margins ------------  
\usepackage{geometry}
\geometry{
 a4paper,
 total={170mm,257mm},
 left=40mm,
 right=25mm,
 top=20mm,
 bottom=25mm
 }
% ------------ paragraphs ------------
\setlength{\parindent}{1.5cm}
\newcommand{\myparskip}{2mm}

% ------------ fonts ------------ 
\usepackage[T1]{fontenc}
\usepackage{helvet}

% ------------ colors ------------ 
\usepackage[dvipsnames, table]{xcolor}
\definecolor{rowgray}{gray}{0.9}

% ------------ citations ------------ 
% epigraph
\usepackage{epigraph}
% quoting
\usepackage{csquotes}
% quotes
\usepackage{dirtytalk}
% referencing
\usepackage{nameref}
% BibLaTeX
\usepackage[backend=biber, style=ieee]{biblatex} % bwl-FU

% ------------ page ------------
% numbering
\usepackage[utf8]{inputenc}
% line spacing
\usepackage{setspace}
% adjust margins
\usepackage{changepage}
% number lines
\usepackage{lineno}
% headers and footers
\usepackage{fancyhdr}

% ------------ non-text items ------------
% insert graphics
\usepackage{graphicx}
% wrapp figures in text
\usepackage{wrapfig}
% frames
\usepackage{tcolorbox}
% listing
\usepackage{listings}
% caption package - settings
\usepackage[font={scriptsize,sf}, labelfont=bf]{caption}

% ------------ tables ------------
\usepackage{array}
\usepackage{booktabs}

% ------------ extra sections ------------
% appendix
\usepackage[title]{appendix}
% glossaries
\usepackage[toc, acronym]{glossaries}
% nomenclature
\usepackage[intoc, portuguese]{nomencl}

% ------------ misc ------------
% titles
\usepackage{titlesec}
% sorted lists package
\usepackage{enumerate}
% math package
\usepackage{amsmath}
% math symbols
\usepackage{amssymb}
% accouting symbols
\usepackage{textcomp}
% highlighting
\usepackage{soul}

% ----------------- SETUPS -----------------  
% ------------ section setup ------------
\setcounter{chapter}{-1}

% ------------ links setup ------------
\usepackage{hyperref}
\hypersetup{
	colorlinks=true,
	linkcolor=blue,
	citecolor=blue,
	filecolor=magenta,      
	urlcolor=cyan,
	pdftitle={Possantti 2024 - Thesis},
}

% ------------ box setup ------------ 
% simple box
\newtcolorbox[auto counter,number within=section]{simplebox}[2][]{
arc=0mm,
%breakable=true,
%coltitle=white,
%coltext=black,
%colback=lightgray,
%colframe=darkgray,
fontupper=\sffamily,
fonttitle=\sffamily\bfseries,
title=\sffamily Destaque~\thetcbcounter -- #2,#1
}

% code box
\newtcolorbox[auto counter,number within=section]{algbox}[2][]{
arc=0mm,
%coltitle=white,
%coltext=black,
colback=lightgray,
%colframe=darkgray,
fontupper=\sffamily,
fonttitle=\sffamily\bfseries,
title=\sffamily Algorithm~\thetcbcounter -- #2,#1
}

% ------------ theorems ------------ 
%\theoremstyle{definition}
%\newtheorem{problem}{Problema}[chapter]
%\newtheorem{definition}{Definição}[section]
%\newtheorem{assumption}{Premissa}[section]

% ------------ page formatting ------------ 
%\pagecolor{black}
%\color{white}
% Set formats for each heading level
\titleformat{\chapter}[display]
  {\bfseries\fontfamily{phv}\selectfont\huge}
  {\chaptertitlename\ \thechapter}{20pt}{\LARGE}
\titleformat*{\section}{\bfseries\fontfamily{phv}\selectfont\Large}
\titleformat*{\subsection}{\fontfamily{phv}\selectfont\large}
\titleformat*{\subsubsection}{\fontfamily{phv}\selectfont\normalsize}

% ------------ listing setup ------------
\lstdefinestyle{mystyle}{
	backgroundcolor=\color{lightgray},   
	commentstyle=\color{darkgray},
	keywordstyle=\color{purple},
	numberstyle=\tiny\color{darkgray},
	stringstyle=\color{teal},
	basicstyle=\color{black}\ttfamily\footnotesize\linespread{2.5},
	breakatwhitespace=false,         
	breaklines=false,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=2pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=3
}
\lstset{style=mystyle}

% ------ set metadata ------ 
\hypersetup{
pdftitle={mytitle},
pdfsubject={mysubject},
pdfauthor={myname},
pdfkeywords={keywords},
}

% ------------ figure setup ------------
% set the figure folder
\graphicspath{{./figs}}
\captionsetup[figure]{labelformat=simple, labelsep=quad}

% ------------ references setup ------------
\addbibresource{refs.bib}

% ------------ names setup ------------
% ---- global names -----
\newcommand{\nameChap}{Capítulo}
\newcommand{\nameSec}{Seção}
\newcommand{\nameAppendix}{Apêndice}
\newcommand{\nameTable}{Tabela}
\newcommand{\nameFigure}{Figura}
\newcommand{\nameEq}{Equação}
\newcommand{\nameBox}{Quadro}
\newcommand{\nameCode}{Algoritmo}

% ---- local names -----
\newcommand{\chapEpis}{Teorias e evidências}
\newcommand{\chapSys}{Sistemas e modelos}
\newcommand{\chapHydro}{Processo hidrológicos}
\newcommand{\chapEcon}{Capital natural}

% ------------ glossary setup ------------
\input{glossary_pt}


% ---------------- define acronyms ------------------------
\newacronym{glue}{\texttt{GLUE}}{\textit{Generalized Likelihood Uncertantiy Estimation}}
\newacronym{et}{\texttt{ET}}{evapotranspiração}
\newacronym{scs}{\texttt{SCS}}{\textit{SoilConservation Service}}
\newacronym{usda}{\texttt{USDA}}{\textit{United States Department of Agriculture}}
\newacronym{cn}{\texttt{CN}}{\textit{Curve Number}}
\newacronym{vsa}{\texttt{VSA}}{\textit{Variable Source Area}}

% ------------ nomenclature setup ------------
% This code creates the groups
%\usepackage{etoolbox}
\usepackage{nomencl}
\usepackage{etoolbox}

% Redefine the nomenclature title
\renewcommand{\nomname}{Símbolos}

\renewcommand\nomgroup[1]{%
  \item[\bfseries
  \ifstrequal{#1}{A}{\sffamily \nameChap\;1 -- \chapEpis}{
  \ifstrequal{#1}{B}{\sffamily \nameChap\;2 -- \chapSys}{
  \ifstrequal{#1}{C}{\sffamily \nameChap\;3 -- \chapHydro}{
  \ifstrequal{#1}{D}{\sffamily \nameChap\;4 -- \chapEcon}{
  }}}}%
]}

\makenomenclature

\usepackage{subfiles} % Best loaded last in the preamble
% ------------ MAIN DOCUMENT ------------ 
\begin{document}
% Set the page style to "fancy"...
\pagestyle{fancy}
%... then configure it.
\fancyhead{} % clear all header fields
\fancyhead[L]{\footnotesize\sffamily{\nouppercase{\leftmark}}}
\fancyfoot{} % clear all footer fields
\fancyfoot[C]{\thepage}

\pagenumbering{roman}

% ---------------- First Pages ---------------- 
% cover
\subfile{cover_a}	

% ficha catalografica
%\subfile{cover_b}

% contra capa
\subfile{cover_b}

% assinaturas da banca
%\subfile{cover_b}

% epigrafe
\subfile{epigraph}

% dedicatoria
%\subfile{cover_b}

% agradecimentos
\subfile{thanks}

% notas tecnicas
\subfile{note_tense}

% agradecimentos
\subfile{abstract}

% ---------------- Document map ---------------- 

% table of contents
\thispagestyle{empty}
\tableofcontents
\clearpage	
	
% list of figures
\listoffigures
\clearpage

% list of tables
\listoftables
\clearpage

% list of acron
\printglossary[type=\acronymtype]
\clearpage

% ---------------- Symbols ---------------- 

% ------  Epistemology Chapter
\nomenclature[A]{\(S\)}{Enunciado}
\nomenclature[A]{\(\Omega\)}{Espaço de possibilidades}
\nomenclature[A]{\(H\)}{Hipótese}
\nomenclature[A]{\(E\)}{Evidência}
\nomenclature[A]{\(P\)}{Probabilidade}
\nomenclature[A]{\(M\)}{Modelo}
\nomenclature[A]{\(O\)}{Observação}
\nomenclature[A]{\(\Theta\)}{Vetor de parâmetros}
\nomenclature[A]{\(\Upsilon\)}{Vetor de dados de entrada}
\nomenclature[A]{\(\varepsilon\)}{Erro}
\nomenclature[A]{\(\mu\)}{Média}
\nomenclature[A]{\(\sigma^2\)}{Variância}
\nomenclature[A]{\(s^2\)}{Variância amostral}
\nomenclature[A]{\(n\)}{Tamanho amostral}

% ------  Systems Chapter
\nomenclature[B]{\(S\)}{Estado ou nível de um compartimento}
\nomenclature[B]{\(\Delta t\)}{Passo de tempo}

% ------  Hydrology Chapter
\nomenclature[C]{\(Q\)}{Vazão}

\printnomenclature
\clearpage

% ---------------- Thesis Epigraph ---------------- 
%\subfile{epigraph}

% ---------------- Chapters setup ---------------- 
\linenumbers % start line numeration
\modulolinenumbers[5]
%\doublespacing % line spacing	
\pagenumbering{arabic} % start arabic numeration

% ---------------- Chapters ---------------- 
\subfile{chap_intro}

\subfile{chap_episteme_cover}
\subfile{chap_episteme}

\subfile{chap_systems_cover}
\subfile{chap_systems}

\subfile{chap_hydrology_cover}
\subfile{chap_hydrology}

% ---------------- line setup ----------------
\nolinenumbers
%\singlespacing
%\onehalfspacing

% ---------------- Glossary ---------------- 
\clearpage
\printglossary[title=Glossário, toctitle=Glossário]

% ---------------- References ---------------- 
\clearpage
\printbibliography

% ---------------- Appendix ---------------- 
% uncomment this
\begin{comment}
\begin{appendices}

\subfile{chap_simple}

\clearpage

\end{appendices}
\end{comment}


\end{document}



